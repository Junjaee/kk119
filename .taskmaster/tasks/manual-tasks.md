# 슈퍼어드민 시스템 구현 작업 목록

## 🎯 Phase 1: 기반 시스템 구축 (1주차)

### 1.1 데이터베이스 스키마 설계 및 구현
- **작업**: 4-tier 사용자 시스템을 위한 데이터베이스 스키마 설계
- **상세**:
  - users 테이블에 role 컬럼 추가 (SUPER_ADMIN, ADMIN, LAWYER, TEACHER)
  - associations 테이블 생성 (협회 정보)
  - user_associations 테이블 생성 (사용자-협회 매핑)
  - board_permissions 테이블 생성 (협회별 게시판 접근 권한)
  - admin_approvals 테이블 생성 (관리자 승인 기록)
- **예상 시간**: 4시간
- **우선순위**: 높음

### 1.2 사용자 역할 기반 인증 미들웨어 구현
- **작업**: Next.js 미들웨어로 역할 기반 접근 제어 구현
- **상세**:
  - middleware.ts 수정으로 역할별 라우트 보호
  - /super-admin/* 경로는 SUPER_ADMIN만 접근
  - /admin/* 경로는 ADMIN, SUPER_ADMIN 접근
  - /lawyer/* 경로는 LAWYER, SUPER_ADMIN 접근
  - useAuth 훅에 역할 확인 기능 추가
- **예상 시간**: 3시간
- **우선순위**: 높음

### 1.3 슈퍼어드민 기본 계정 생성 스크립트
- **작업**: 최초 슈퍼어드민 계정을 생성하는 스크립트 작성
- **상세**:
  - scripts/create-superadmin.js 파일 생성
  - CLI를 통한 슈퍼어드민 계정 생성
  - 비밀번호 해싱 및 데이터베이스 저장
  - 환경변수로 기본 슈퍼어드민 정보 관리
- **예상 시간**: 2시간
- **우선순위**: 높음

## 🏗️ Phase 2: 슈퍼어드민 대시보드 구현 (1주차)

### 2.1 슈퍼어드민 전용 레이아웃 구현
- **작업**: 슈퍼어드민 전용 대시보드 레이아웃 생성
- **상세**:
  - app/super-admin/layout.tsx 생성
  - 슈퍼어드민 전용 사이드바 네비게이션
  - 계정 생성, 협회 관리, 게시판 설정 메뉴
  - 시스템 통계 위젯
  - 로그아웃 및 설정 메뉴
- **예상 시간**: 4시간
- **우선순위**: 높음

### 2.2 슈퍼어드민 대시보드 홈페이지
- **작업**: 시스템 전반적인 현황을 보여주는 대시보드
- **상세**:
  - app/super-admin/page.tsx 구현
  - 총 사용자 수 (역할별 분류)
  - 협회별 교사 현황 차트
  - 최근 가입자 목록
  - 게시판 활동 통계
  - 대기 중인 승인 건수
- **예상 시간**: 5시간
- **우선순위**: 중간

## 👥 Phase 3: 계정 생성 관리 시스템 (1주차)

### 3.1 관리자 계정 생성 폼
- **작업**: 슈퍼어드민이 관리자 계정을 생성하는 페이지
- **상세**:
  - app/super-admin/accounts/admin/new/page.tsx 구현
  - 관리자 정보 입력 폼 (이름, 이메일, 연락처)
  - 소속 협회 선택 드롭다운
  - 자동 ID/PW 생성기 또는 직접 입력
  - 권한 범위 설정 (담당 협회)
  - 계정 생성 시 이메일 알림 기능
- **예상 시간**: 6시간
- **우선순위**: 높음

### 3.2 변호사 계정 생성 폼
- **작업**: 슈퍼어드민이 변호사 계정을 생성하는 페이지
- **상세**:
  - app/super-admin/accounts/lawyer/new/page.tsx 구현
  - 변호사 정보 입력 폼 (이름, 이메일, 연락처)
  - 전문 분야 선택 (교권보호, 민사, 형사 등)
  - 자격증 정보 입력 (변호사 등록번호)
  - 자동 ID/PW 생성 또는 직접 설정
  - 활동 지역 설정
- **예상 시간**: 5시간
- **우선순위**: 높음

### 3.3 계정 목록 및 관리 페이지
- **작업**: 생성된 관리자/변호사 계정을 조회하고 관리하는 페이지
- **상세**:
  - app/super-admin/accounts/page.tsx 구현
  - 관리자/변호사 목록 테이블
  - 계정 상태 관리 (활성/비활성/정지)
  - 비밀번호 리셋 기능
  - 계정 정보 수정 기능
  - 계정 삭제 기능 (확인 다이얼로그)
- **예상 시간**: 6시간
- **우선순위**: 중간

## 🏢 Phase 4: 협회 관리 시스템 (2주차)

### 4.1 협회 등록 폼 구현
- **작업**: 새로운 협회를 등록하는 페이지
- **상세**:
  - app/super-admin/associations/new/page.tsx 구현
  - 협회 기본 정보 입력 (협회명, 지역, 주소)
  - 담당자 정보 입력 (이름, 연락처, 이메일)
  - 협회 유형 선택 (초등, 중등, 고등, 대학 등)
  - 협회 로고 업로드 기능
  - 운영 상태 설정 (운영중/휴면/폐쇄)
- **예상 시간**: 5시간
- **우선순위**: 높음

### 4.2 협회 목록 및 관리 페이지
- **작업**: 등록된 협회 목록 조회 및 관리
- **상세**:
  - app/super-admin/associations/page.tsx 구현
  - 협회 목록 테이블 (검색, 필터링 기능)
  - 협회별 회원 수 표시
  - 협회 정보 수정/삭제 기능
  - 협회별 관리자 배정 기능
  - 협회 상태 일괄 변경 기능
- **예상 시간**: 6시간
- **우선순위**: 높음

### 4.3 협회별 상세 정보 페이지
- **작업**: 특정 협회의 상세 정보와 회원 현황
- **상세**:
  - app/super-admin/associations/[id]/page.tsx 구현
  - 협회 기본 정보 표시
  - 협회 소속 교사 목록
  - 배정된 관리자 목록
  - 협회별 게시판 접근 권한 현황
  - 월별 가입자 통계 차트
- **예상 시간**: 4시간
- **우선순위**: 중간

## 🎛️ Phase 5: 게시판 권한 설정 시스템 (2주차)

### 5.1 게시판 권한 설정 페이지
- **작업**: 협회별 게시판 접근 권한을 설정하는 인터페이스
- **상세**:
  - app/super-admin/board-permissions/page.tsx 구현
  - 협회별 매트릭스 형태의 권한 설정 테이블
  - 게시판 목록 (커뮤니티, 신고, 상담, 공지사항 등)
  - 권한 레벨 설정 (접근 불가, 읽기 전용, 읽기/쓰기)
  - 권한 템플릿 시스템 (기본형, 프리미엄형, 전체형)
  - 일괄 권한 설정 기능
- **예상 시간**: 7시간
- **우선순위**: 중간

### 5.2 게시판 접근 제어 미들웨어
- **작업**: 사용자의 협회 소속에 따른 게시판 접근 제어
- **상세**:
  - lib/middleware/boardAccess.ts 구현
  - 사용자 협회 정보와 게시판 권한 매핑 확인
  - 접근 거부 시 적절한 에러 메시지 표시
  - 게시판별 권한 검증 함수
  - 동적 라우트 보호 (게시글 상세, 작성 등)
- **예상 시간**: 4시간
- **우선순위**: 높음

## 👨‍💼 Phase 6: 관리자 기능 구현 (2주차)

### 6.1 관리자 대시보드
- **작업**: 관리자 전용 대시보드 페이지
- **상세**:
  - app/admin/page.tsx 구현
  - 담당 협회 교사 현황
  - 승인 대기 중인 회원 수
  - 최근 가입 신청 목록
  - 협회별 게시판 활동 통계
  - 공지사항 작성/관리 기능
- **예상 시간**: 5시간
- **우선순위**: 높음

### 6.2 교사 회원 인증 시스템
- **작업**: 관리자가 교사들의 협회 회원 상태를 승인/거부하는 기능
- **상세**:
  - app/admin/approvals/page.tsx 구현
  - 승인 대기 중인 교사 목록
  - 교사 정보 상세 조회 (제출 서류, 인증 정보)
  - 승인/거부 버튼 및 사유 입력
  - 일괄 승인 기능
  - 승인 완료 시 자동 알림 발송
- **예상 시간**: 6시간
- **우선순위**: 높음

### 6.3 협회 회원 관리
- **작업**: 승인된 협회 회원들의 상태 관리
- **상세**:
  - app/admin/members/page.tsx 구현
  - 협회 소속 교사 목록 (검색, 필터링)
  - 회원 상태 변경 (활성, 휴면, 정지)
  - 회원 정보 수정 기능
  - 회원별 활동 내역 조회
  - 엑셀 다운로드 기능
- **예상 시간**: 5시간
- **우선순위**: 중간

## 🎓 Phase 7: 교사 회원가입 시스템 개선 (3주차)

### 7.1 협회 선택 기능 추가
- **작업**: 교사 회원가입 시 협회 선택 드롭다운 구현
- **상세**:
  - app/signup/page.tsx 수정
  - 동적으로 로드되는 협회 목록 API
  - 협회 검색 및 필터링 기능
  - 협회별 가입 조건 안내
  - 소속 증명 서류 업로드 기능
- **예상 시간**: 4시간
- **우선순위**: 높음

### 7.2 협회 회원 승인 대기 상태 표시
- **작업**: 가입 후 승인 대기 상태를 사용자에게 표시
- **상세**:
  - 승인 대기 중 상태 페이지 구현
  - 승인 진행 상황 표시
  - 예상 승인 시간 안내
  - 추가 서류 제출 기능
  - 승인 완료 시 자동 리다이렉트
- **예상 시간**: 3시간
- **우선순위**: 중간

### 7.3 협회별 회원 혜택 안내 페이지
- **작업**: 각 협회별 제공 서비스와 혜택을 안내하는 페이지
- **상세**:
  - app/associations/benefits/page.tsx 구현
  - 협회별 사용 가능한 게시판 목록
  - 제공되는 서비스 내용
  - 전용 컨텐츠 미리보기
  - 가입 절차 안내
- **예상 시간**: 3시간
- **우선순위**: 낮음

## 🔐 Phase 8: 보안 및 알림 시스템 (3주차)

### 8.1 슈퍼어드민 2단계 인증
- **작업**: TOTP 기반 2단계 인증 구현
- **상세**:
  - Google Authenticator 연동
  - QR 코드 생성 기능
  - 로그인 시 OTP 검증
  - 백업 코드 생성 및 관리
  - 2FA 비활성화 기능 (비밀번호 재확인)
- **예상 시간**: 6시간
- **우선순위**: 낮음

### 8.2 계정 생성 알림 시스템
- **작업**: 계정 생성 시 자동 알림 발송
- **상세**:
  - 이메일 템플릿 시스템 구현
  - 관리자/변호사 계정 생성 시 환영 이메일
  - 임시 비밀번호 및 초기 설정 안내
  - SMS 알림 기능 (선택사항)
  - 알림 발송 실패 시 재시도 로직
- **예상 시간**: 5시간
- **우선순위**: 낮음

### 8.3 시스템 감사 로그
- **작업**: 중요한 시스템 작업에 대한 로그 기록
- **상세**:
  - 계정 생성/수정/삭제 로그
  - 권한 변경 로그
  - 협회 승인/거부 로그
  - 로그 조회 인터페이스
  - 로그 필터링 및 검색 기능
- **예상 시간**: 4시간
- **우선순위**: 낮음

## 🎨 Phase 9: UI/UX 개선 및 테스트 (3주차)

### 9.1 반응형 디자인 최적화
- **작업**: 모든 슈퍼어드민 페이지의 모바일 대응
- **상세**:
  - 테이블 컴포넌트 모바일 최적화
  - 터치 친화적 인터페이스 요소
  - 모바일에서의 네비게이션 개선
  - 브레이크포인트별 레이아웃 조정
- **예상 시간**: 4시간
- **우선순위**: 중간

### 9.2 통합 테스트 및 버그 수정
- **작업**: 전체 시스템의 통합 테스트 수행
- **상세**:
  - 계정 생성부터 권한 부여까지 전체 플로우 테스트
  - 권한 기반 접근 제어 테스트
  - 데이터 무결성 검증
  - 보안 취약점 점검
  - 성능 최적화
- **예상 시간**: 8시간
- **우선순위**: 높음

### 9.3 사용자 매뉴얼 작성
- **작업**: 각 역할별 사용 가이드 작성
- **상세**:
  - 슈퍼어드민 사용 매뉴얼
  - 관리자 업무 가이드
  - 변호사 시스템 사용법
  - 교사 가입 및 이용 안내
  - 스크린샷과 함께 단계별 설명
- **예상 시간**: 4시간
- **우선순위**: 낮음

## 📋 **구현 우선순위 요약**

**1주차 (필수 구현)**:
- 데이터베이스 스키마 (1.1)
- 인증 미들웨어 (1.2)
- 슈퍼어드민 계정 생성 (1.3)
- 슈퍼어드민 레이아웃 (2.1)

**2주차 (핵심 기능)**:
- 계정 생성 폼 (3.1, 3.2)
- 협회 관리 (4.1, 4.2)
- 게시판 권한 설정 (5.1, 5.2)

**3주차 (완성 및 테스트)**:
- 관리자 기능 (6.1, 6.2)
- 교사 가입 개선 (7.1, 7.2)
- 통합 테스트 (9.2)

---

**총 예상 개발 시간**: 120-140시간 (3-4주)
**필수 구현 시간**: 80-90시간 (2-3주)